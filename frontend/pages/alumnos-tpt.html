<!DOCTYPE html>
<html lang="es" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TFT - Alumno TPT</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background: #1e1e1e; color: #fff; }
        .dashboard { padding: 2rem; }
        .card { background: #2c2c2c; border: none; margin-bottom: 1.5rem; }
        .card-body { padding: 1rem; }
        .notification-card { background: #1a202c; border-left: 5px solid #750e25; }
        .chat-section { background: #1a202c; border-radius: 10px; padding: 1rem; }
        .chat-header { background: #750e25; padding: 0.5rem; border-radius: 5px; text-align: center; font-weight: bold; }
        .chat-messages { height: 150px; overflow-y: auto; padding: 0.5rem; background: #2c2c2c; border-radius: 5px; margin-bottom: 0.5rem; }
        .message.user { text-align: right; color: #ffffff; }
        .message.bot { text-align: left; color: #750e25; }
        .chat-input textarea { flex: 1; resize: none; padding: 0.5rem; border: none; border-radius: 5px; background: #1a202c; color: #ffffff; }
        .chat-input button { background-color: #750e25; color: #ffffff; border: none; padding: 0.5rem 1rem; font-size: 0.9rem; border-radius: 5px; transition: all 0.3s ease; }
        .chat-input button:hover { background-color: #ffffff; color: #750e25; }
        footer { background: #1e1e1e; color: #aaa; text-align: center; padding: 1rem; }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">TFT - TPT</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#">Perfil</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Simulaciones</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <main class="dashboard">
        <!-- Material Desbloqueado -->
        <div class="section">
            <h2>Acceso a Material</h2>
            <div class="row">
                <div class="col-md-4">
                    <a href="videos-tft.html" class="btn btn-primary btn-block">Ver Videos</a>
                </div>
                <div class="col-md-4">
                    <a href="pdfs-academicos-tpt.html" class="btn btn-primary btn-block">Ver PDFs</a>
                </div>
                <div class="col-md-4">
                    <a href="libros-tpt.html" class="btn btn-primary btn-block">Ver Libros</a>
                </div>
            </div>
        </div>

        <!-- Botones Sim√©tricos -->
        <div class="row text-center">
            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h5>Manager de Trading</h5>
                        <p>Accede a herramientas avanzadas para gestionar tus estrategias y operaciones.</p>
                        <a href="manager-trading.html" class="btn btn-warning">Ir al Manager de Trading</a>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h5>Actividades</h5>
                        <p>Consulta tus actividades asignadas y env√≠a tus tareas.</p>
                        <a href="actividades-tpt.html" class="btn btn-primary">Ir a Actividades</a>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h5>Hoja de Ruta</h5>
                        <p>Est√°s en la Semana 5 de 24. Completa esta semana para avanzar al siguiente nivel.</p>
                        <a href="#" class="btn btn-primary">Ver Hoja de Ruta</a>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h5>IA Auditor√≠a</h5>
                        <p>An√°lisis emocional y t√©cnico de tu performance. Recibe retroalimentaci√≥n personalizada.</p>
                        <a href="#" class="btn btn-success">Ver An√°lisis</a>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h5>Registro Emocional</h5>
                        <p>Completa encuestas personalizadas para mejorar tu perfil como operador.</p>
                        <a href="registro-emocional.html" class="btn btn-primary">Acceder al Registro Emocional</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notificaciones -->
        <div class="row">
            <div class="col-12">
                <div class="card notification-card">
                    <div class="card-body">
                        <h5 class="chat-header">Notificaciones del Calendario</h5>
                        <p>Recibe alertas sobre eventos y clases programadas.</p>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">üìÖ Clase de Simulaci√≥n - 10 de junio.</li>
                            <li class="list-group-item">üìÖ Revisi√≥n de Estrategias - 15 de junio.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Historial de Actividades -->
        <div class="row">
            <div class="col-12">
                <div class="card chat-section">
                    <div class="card-body">
                        <h5 class="chat-header">Historial de Actividades</h5>
                        <div id="chat-messages" class="chat-messages"></div>
                        <div class="chat-input">
                            <textarea id="chat-input" rows="2" placeholder="Escribe tu mensaje aqu√≠..."></textarea>
                            <button onclick="sendMessage()">Enviar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chatbot IA Acad√©mica -->
        <div class="row">
            <div class="col-12">
                <div class="card chat-section">
                    <div class="card-body">
                        <h5 class="chat-header">Chatbot IA Acad√©mica</h5>
                        <p>Pregunta a tu tutor virtual sobre las clases, ejercicios o temas del curso.</p>
                        <div id="chat-messages" class="chat-messages"></div>
                        <div class="chat-input">
                            <textarea id="chat-input" rows="2" placeholder="Escribe tu mensaje aqu√≠..."></textarea>
                            <button onclick="sendMessage()">Enviar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Consultor√≠a Personalizada -->
        <div class="row mt-5">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-body">
                        <h5 class="text-center">Consultor√≠a Personalizada</h5>
                        <p class="text-center">Solicita una sesi√≥n de consultor√≠a personalizada con nuestros expertos.</p>
                        <form id="consultoriaForm" class="mt-4">
                            <div class="mb-3">
                                <label for="tema" class="form-label">Tema</label>
                                <input type="text" class="form-control" id="tema" required>
                            </div>
                            <div class="mb-3">
                                <label for="descripcion" class="form-label">Descripci√≥n</label>
                                <textarea class="form-control" id="descripcion" rows="4" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Enviar Solicitud</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-dark text-white text-center py-4">
        <p>&copy; 2025 Training for Traders</p>
    </footer>

    <script>
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');

        function sendMessage() {
            const userMessage = chatInput.value.trim();
            if (!userMessage) return;

            // Mostrar mensaje del usuario
            const userMessageElement = document.createElement('div');
            userMessageElement.className = 'message user';
            userMessageElement.textContent = userMessage;
            chatMessages.appendChild(userMessageElement);

            // Simular respuesta de la IA
            const botMessageElement = document.createElement('div');
            botMessageElement.className = 'message bot';
            botMessageElement.textContent = 'Procesando tu mensaje...';
            chatMessages.appendChild(botMessageElement);

            setTimeout(() => {
                botMessageElement.textContent = `IA Acad√©mica: Respuesta a "${userMessage}".`;
            }, 1000);

            chatInput.value = '';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        document.getElementById('consultoriaForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const tema = document.getElementById('tema').value;
            const descripcion = document.getElementById('descripcion').value;
            await fetch('/api/consultoria/create', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ usuario: 'Alumno TPT', tema, descripcion }),
            });
            alert('Solicitud enviada con √©xito.');
        });

        document.addEventListener('DOMContentLoaded', function () {
            loadMaterials();
        });

        function loadMaterials() {
            // Simulaci√≥n de datos de materiales
            const materials = {
                basicVideos: [
                    { title: 'Introducci√≥n al Trading', url: 'https://example.com/video1' },
                    { title: 'Conceptos B√°sicos', url: 'https://example.com/video2' },
                ],
                advancedVideos: [
                    { title: 'Estrategias Avanzadas', url: 'https://example.com/video3' },
                    { title: 'Gesti√≥n de Riesgo', url: 'https://example.com/video4' },
                ],
                pdfs: [
                    { title: 'Gu√≠a de Trading', url: 'https://example.com/guide.pdf' },
                    { title: 'An√°lisis T√©cnico', url: 'https://example.com/technical.pdf' },
                ],
                books: [
                    { title: 'El Inversor Inteligente', url: 'https://example.com/book1.pdf' },
                    { title: 'Trading en la Zona', url: 'https://example.com/book2.pdf' },
                ],
            };

            // Cargar Videos B√°sicos
            const basicVideosContainer = document.getElementById('basicVideos');
            materials.basicVideos.forEach(video => {
                const li = document.createElement('li');
                li.className = 'list-group-item';
                li.innerHTML = `<a href="${video.url}" target="_blank">${video.title}</a>`;
                basicVideosContainer.appendChild(li);
            });

            // Cargar Videos Avanzados
            const advancedVideosContainer = document.getElementById('advancedVideos');
            materials.advancedVideos.forEach(video => {
                const li = document.createElement('li');
                li.className = 'list-group-item';
                li.innerHTML = `<a href="${video.url}" target="_blank">${video.title}</a>`;
                advancedVideosContainer.appendChild(li);
            });

            // Cargar PDFs
            const pdfsContainer = document.getElementById('pdfs');
            materials.pdfs.forEach(pdf => {
                const li = document.createElement('li');
                li.className = 'list-group-item';
                li.innerHTML = `<a href="${pdf.url}" target="_blank">${pdf.title}</a>`;
                pdfsContainer.appendChild(li);
            });

            // Cargar Libros
            const booksContainer = document.getElementById('books');
            materials.books.forEach(book => {
                const li = document.createElement('li');
                li.className = 'list-group-item';
                li.innerHTML = `<a href="${book.url}" target="_blank">${book.title}</a>`;
                booksContainer.appendChild(li);
            });
        }
    </script>
</body>
</html>